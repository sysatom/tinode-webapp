{"version":3,"file":"365.prod.js","mappings":"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","sources":["webpack://tinode-webapp/./src/widgets/credential-edit.jsx","webpack://tinode-webapp/./src/views/account-settings-view.jsx","webpack://tinode-webapp/./src/widgets/phone-edit.jsx"],"sourcesContent":["// Enter one credential at a time.\n\nimport React from 'react';\nimport { defineMessages, FormattedMessage, injectIntl } from 'react-intl';\nimport PhoneEdit from './phone-edit.jsx';\nimport { parsePhoneNumber } from 'libphonenumber-js/mobile';\n\nconst messages = defineMessages({\n  password_reset_email_sent: {\n    id: 'password_reset_email_sent',\n    defaultMessage: 'An email with security code has been sent.',\n    description: 'Notification that the email with password reset instructions has been sent'\n  },\n  password_reset_sms_sent: {\n    id: 'password_reset_sms_sent',\n    defaultMessage: 'A text message with security code has been sent.',\n    description: 'Notification that the SMS with password reset instructions has been sent'\n  },\n});\n\nclass CredentialEdit extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      code: '',\n      tel: '',\n      email: '',\n      sent: false\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handlePhoneChange = this.handlePhoneChange.bind(this);\n    this.handleCodeChange = this.handleCodeChange.bind(this);\n  }\n\n  static formatPhoneNumber(raw) {\n    let number;\n    try {\n      number = parsePhoneNumber(raw);\n    } catch (err) {}\n    return number ? number.formatInternational() : raw;\n  }\n\n  handleEmailChange(e) {\n    this.setState({email: e.target.value});\n  }\n\n  handlePhoneChange(number) {\n    this.setState({tel: number});\n  }\n\n  handleCodeChange(e) {\n    this.setState({code: e.target.value.replace(/[^\\d]/g, '')});\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const value = this.props.method == 'email' ? this.state.email : this.state.tel;\n    if (value) {\n      this.props.onSubmit(this.props.method, value);\n      this.setState({sent: true});\n      const msg = this.props.method == 'email' ? messages.password_reset_email_sent : messages.password_reset_sms_sent;\n      this.props.onError(this.props.intl.formatMessage(msg), 'info');\n    }\n  }\n\n  render() {\n    const readyForCode = this.state.sent || !this.props.done;\n    const currentValue = CredentialEdit.formatPhoneNumber(readyForCode ?\n      (this.state.tel || this.state.email) : this.props.val);\n\n    const changeEmail = (\n      <><div className=\"panel-form-row\">\n        <label className=\"large\"><FormattedMessage id=\"change_email\" defaultMessage=\"Change email\"\n          description=\"Prompt to change current email\" /></label>\n      </div>\n      <div className=\"group\">\n        <label className=\"small gray\">\n          <FormattedMessage id=\"current_email\" defaultMessage=\"Current email\" description=\"Label for old email\" />\n        </label>\n      </div></>);\n\n    const changePhone = (\n      <><div className=\"panel-form-row\">\n      <label className=\"large\"><FormattedMessage id=\"change_phone\" defaultMessage=\"Change phone number\"\n        description=\"Prompt to change current phone number\"/></label>\n      </div>\n      <div className=\"group\">\n        <label className=\"small gray\">\n          <FormattedMessage id=\"current_phone\" defaultMessage=\"Current phone number\" description=\"Label for old phone\" />\n        </label>\n      </div></>\n    );\n\n    const newEmailLabel = (<label className=\"small gray\">\n        <FormattedMessage id=\"new_email\" defaultMessage=\"New email\"\n          description=\"Prompt for entering a new email\" />\n      </label>);\n\n    const newEmailInput = (\n      <><div className=\"group\">{newEmailLabel}</div>\n      <div className=\"group\">\n        <FormattedMessage id=\"email_prompt\" defaultMessage=\"Email, e.g. jdoe@example.com\"\n          description=\"Input placeholder for email entry\">{\n          (email_prompt) => <input type=\"email\" placeholder={email_prompt} autoComplete=\"email\"\n            value={this.state.email} onChange={this.handleEmailChange} required/>\n        }</FormattedMessage>\n      </div></>\n    );\n\n    const newPhoneLabel = (<label className=\"small gray\">\n        <FormattedMessage id=\"new_phone_number\" defaultMessage=\"New phone number\"\n        description=\"Prompt for entering a new telephone number\" />\n      </label>);\n\n    const newPhoneInput = (\n      <><div className=\"group\">{newPhoneLabel}</div>\n      <div className=\"panel-form-row\">\n        <PhoneEdit\n          autoFocus={true}\n          onShowCountrySelector={this.props.onShowCountrySelector}\n          onSubmit={this.handlePhoneChange} />\n      </div></>\n    );\n\n    const codeInput = (\n      <><div className=\"group\">\n        <label className=\"small gray\"><FormattedMessage id=\"enter_confirmation_code_prompt\" defaultMessage=\"Confirmation code\"\n            description=\"Request to enter confirmation code\" /></label>\n      </div>\n      <div className=\"group\">\n        <FormattedMessage id=\"numeric_confirmation_code_prompt\" defaultMessage=\"Numbers only\"\n          description=\"Prompt for numeric conformation code\">{\n          (numbers_only) => <input type=\"text\" placeholder={numbers_only} maxLength={10}\n          value={this.state.code} onChange={this.handleCodeChange} required/>\n        }</FormattedMessage>\n      </div></>\n    );\n\n    return (<form className=\"panel-form-column\" onSubmit={this.handleSubmit}>\n      {readyForCode ? null :\n      this.props.method == 'email' ?\n        changeEmail\n      : this.props.method == 'tel' ?\n        changePhone\n      : null}\n      <div className=\"panel-form-row\">\n        <tt className=\"quoted\">{currentValue}</tt>\n      </div>\n      {readyForCode ? null :\n      this.props.method == 'email' ?\n        newEmailInput\n      : this.props.method == 'tel' ?\n        newPhoneInput\n      : null}\n      {readyForCode ? codeInput : null}\n      <div className=\"dialog-buttons\">\n        <button className=\"secondary\" onClick={this.props.onCancel}>\n          <FormattedMessage id=\"button_cancel\" defaultMessage=\"Cancel\" description=\"Button [Cancel]\" />\n        </button>\n        <button className=\"primary\" type=\"submit\" >\n          <FormattedMessage id=\"button_ok\" defaultMessage=\"OK\" description=\"Button [OK]\" />\n        </button>\n      </div>\n    </form>);\n  }\n}\n\nexport default injectIntl(CredentialEdit);\n","// Edit account parameters.\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { parsePhoneNumber } from 'libphonenumber-js/mobile';\n\nimport AvatarUpload from '../widgets/avatar-upload.jsx';\nimport BadgeList from '../widgets/badge-list.jsx';\n\nimport { makeImageUrl } from '../lib/blob-helpers.js';\nimport { MAX_TITLE_LENGTH, MAX_TOPIC_DESCRIPTION_LENGTH } from '../config.js';\nimport CredentialEdit from '../widgets/credential-edit.jsx';\n\nfunction _clip(str, length) {\n  return str && str.substring(0, length);\n}\n\nexport default class AccountSettingsView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const me = this.props.tinode.getMeTopic();\n    this.state = {\n      fullName: _clip(me.public ? me.public.fn : undefined, MAX_TITLE_LENGTH),\n      description: _clip(me.public ? me.public.note : undefined, MAX_TOPIC_DESCRIPTION_LENGTH),\n      avatar: makeImageUrl(me.public ? me.public.photo : null),\n      credentials: me.getCredentials() || [],\n      credEdit: undefined\n    };\n  }\n\n  componentDidMount() {\n    const me = this.props.tinode.getMeTopic();\n    me.onCredsUpdated = _ => this.setState({credentials: me.getCredentials()});\n  }\n\n  componentWillUnmount() {\n    const me = this.props.tinode.getMeTopic();\n    me.onCredsUpdated = null;\n  }\n\n  render() {\n    if (this.state.credEdit) {\n      return (\n        <CredentialEdit\n          method={this.state.credEdit.meth}\n          val={this.state.credEdit.val}\n          done={this.state.credEdit.done}\n          onShowCountrySelector={this.props.onShowCountrySelector}\n          onSubmit={this.props.onCredAdd}\n          onCancel={_ => this.setState({credEdit: undefined})}\n          onError={this.props.onError} />\n      );\n    }\n\n    const credentials = [];\n    this.state.credentials.forEach((cred, idx) => {\n      if (!['email', 'tel'].includes(cred.meth)) {\n        // Skip unknown methods.\n        return ;\n      }\n\n      let val = cred.val\n      if (cred.meth == 'tel') {\n        const number = parsePhoneNumber(cred.val);\n        val = number ? number.formatInternational() : cred.val;\n      }\n\n      credentials.push(\n        <div className=\"group quoted\" key={idx}>\n          <tt className=\"clickable\" onClick={e => {e.preventDefault(); this.setState({credEdit: cred});}}>{val}</tt>\n          <span> {\n            cred.done ? null :\n            <>\n              <i className=\"material-icons\">pending</i>&nbsp;\n              <a href=\"#\" onClick={e => {e.preventDefault(); this.props.onCredDelete(cred.meth, cred.val);}}>\n                <i className=\"material-icons\">delete</i>\n              </a>\n            </>\n          }</span>\n        </div>);\n    });\n    if (credentials.length > 0) {\n      // Add title as the first element.\n      credentials.unshift(\n        <label className=\"small\" key={'title'}>\n          <FormattedMessage id=\"label_user_contacts\" defaultMessage=\"Contacts\"\n            description=\"Label for user contacts\" />\n        </label>);\n    }\n\n    return (\n      <div className=\"scrollable-panel\">\n        <div className=\"panel-form-column\">\n          <a href=\"#\" className=\"flat-button float-right\" onClick={e => {e.preventDefault(); this.props.onNavigate('general');}}>\n            <i className=\"material-icons\">edit</i>&nbsp;\n            <FormattedMessage id=\"button_edit\" defaultMessage=\"Edit\" description=\"Call to action [Edit]\" />\n          </a>\n          <center>\n            <AvatarUpload\n              tinode={this.props.tinode}\n              avatar={this.state.avatar}\n              readOnly={true}\n              uid={this.props.myUserId}\n              title={this.state.fullName} />\n          </center>\n          <div className=\"group\">\n            <label className=\"small\">\n              <FormattedMessage id=\"label_your_name\" defaultMessage=\"Your name\"\n                description=\"Label for full name editing\" />\n            </label>\n            <div className=\"large ellipsized\">{this.state.fullName}</div>\n          </div>\n          <div className=\"group\">\n            <label className=\"small\"><FormattedMessage id=\"label_user_id\" defaultMessage=\"ID:\"\n              description=\"Label for user address (ID)\" /></label>&nbsp;\n            <tt>{this.props.myUserId}</tt>\n          </div>\n          <div className=\"group\">\n            <BadgeList trustedBadges={this.props.trustedBadges} />\n          </div>\n          {this.state.description ?\n            <div className=\"group\">\n              <label className=\"small\">\n                <FormattedMessage id=\"label_description\" defaultMessage=\"Description\"\n                  description=\"Label for editing topic description\" />\n              </label>\n              <div className=\"quoted\">{this.state.description}</div>\n            </div> : null}\n        </div>\n        <div className=\"hr\" />\n        <div className=\"panel-form-column\">\n          <div className=\"group\">{credentials}</div>\n        </div>\n        <div className=\"hr\" />\n        <div className=\"panel-form-column\">\n          <a href=\"#\" className=\"flat-button\" onClick={e => {e.preventDefault(); this.props.onNavigate('notif');}}>\n            <i className=\"material-icons\">notifications</i>&nbsp;<FormattedMessage id=\"sidepanel_title_acc_notifications\"\n              defaultMessage=\"Notifications\" description=\"Sidepanel title for AccNotificationsView.\" />\n          </a>\n          <a href=\"#\" className=\"flat-button\" onClick={e => {e.preventDefault(); this.props.onNavigate('security');}}>\n            <i className=\"material-icons\">security</i>&nbsp;<FormattedMessage id=\"button_security\"\n              defaultMessage=\"Security\" description=\"Navigaton button for security panel.\" />\n          </a>\n          <a href=\"#\" className=\"flat-button\" onClick={e => {e.preventDefault(); this.props.onNavigate('support');}}>\n            <i className=\"material-icons\">contact_support</i>&nbsp;<FormattedMessage id=\"sidepanel_title_acc_support\"\n              defaultMessage=\"Support\" description=\"Sidepanel title for AccSupportView.\" />\n          </a>\n        </div>\n      </div>\n    );\n  }\n};\n","// Editor for a phone number.\n\nimport React from 'react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport { AsYouType, getExampleNumber, parsePhoneNumber } from 'libphonenumber-js/mobile';\nimport examples from 'libphonenumber-js/mobile/examples'\n\nimport * as dcodes from '../dcodes.json';\nimport { flagEmoji } from '../lib/strformat';\n\nconst messages = defineMessages({\n  mobile_number_required: {\n    id: 'mobile_number_required',\n    defaultMessage: 'Mobile phone number required',\n    description: 'Error message'\n  }\n});\n\nclass PhoneEdit extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.codeMap = {};\n    dcodes.default.forEach(dc => { this.codeMap[dc.code] = dc.dial; });\n\n    const code = props.countryCode || 'US';\n    const dial = this.codeMap[code];\n\n    this.state = {\n      countryCode: code,\n      dialCode: dial,\n      localNumber: '',\n      placeholderNumber: this.placeholderNumber(code, dial)\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleFinished = this.handleFinished.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.showCountrySelector = this.showCountrySelector.bind(this);\n  }\n\n  handleChange(e) {\n    const prefix = `+${this.state.dialCode}`;\n    let formatted = new AsYouType().input(`${prefix}${this.filterNumber(e.target.value)}`);\n    formatted = formatted.substring(prefix.length).trim();\n    this.setState({localNumber: formatted});\n  }\n\n  handleFinished(e) {\n    e.preventDefault();\n    const raw = `${this.state.dialCode}${this.state.localNumber.trim()}`.replace(/[^\\d]/g, '');\n    let number = null;\n    try {\n      number = parsePhoneNumber(`+${raw}`);\n    } catch (err) {}\n\n    if (!number || !number.isValid()) {\n      this.inputField.setCustomValidity(this.props.intl.formatMessage(messages.mobile_number_required));\n      return;\n    }\n\n    this.inputField.setCustomValidity('');\n    this.props.onSubmit(number.format('E.164'));\n  }\n\n\n  handleKeyDown(e) {\n    if (e.key === 'Enter') {\n      this.handleFinished(e);\n    }\n  }\n\n  showCountrySelector() {\n    this.props.onShowCountrySelector(this.state.countryCode, this.state.dialCode,\n      (code, dial) => {\n          this.setState({\n            countryCode: code,\n            dialCode: dial,\n            placeholderNumber: this.placeholderNumber(code, dial)\n        })\n      });\n  }\n\n  // Filter out characters not permitted in a phone number.\n  filterNumber(number) {\n    if (!number) {\n      return number;\n    }\n    // Leave numbers, space, (, ), -, and .\n    // The + is not allowed: it's handled by the country code portion.\n    return number.replace(/[^-\\s().\\d]/g, '');\n  }\n\n  placeholderNumber(code, dial) {\n    const sample = getExampleNumber(code, examples);\n    return sample ? sample.formatInternational().substring(dial.length + 1).trim() : '123 0123';\n  }\n\n  render() {\n    return (\n      <>\n        <span className=\"dial-code\" onClick={this.showCountrySelector}>\n          <span className=\"country-flag\">{flagEmoji(this.state.countryCode)}&nbsp;</span>\n          +{this.state.dialCode}&nbsp;</span>\n        <input type=\"tel\" ref={ref => {this.inputField = ref}} placeholder={this.state.placeholderNumber}\n            value={this.state.localNumber} onChange={this.handleChange}\n            maxLength={17} onKeyDown={this.handleKeyDown} onBlur={this.handleFinished}\n            required autoFocus={this.props.autoFocus} />\n      </>\n    );\n  }\n}\n\nexport default injectIntl(PhoneEdit);\n"],"names":["messages","defineMessages","password_reset_email_sent","id","defaultMessage","password_reset_sms_sent","CredentialEdit","React","constructor","props","super","this","state","code","tel","email","sent","handleSubmit","bind","handleEmailChange","handlePhoneChange","handleCodeChange","static","raw","number","parsePhoneNumber","err","formatInternational","e","setState","target","value","replace","preventDefault","method","onSubmit","msg","onError","intl","formatMessage","render","readyForCode","done","currentValue","formatPhoneNumber","val","changeEmail","className","FormattedMessage","changePhone","newEmailLabel","newEmailInput","email_prompt","type","placeholder","autoComplete","onChange","required","newPhoneLabel","newPhoneInput","PhoneEdit","autoFocus","onShowCountrySelector","codeInput","numbers_only","maxLength","onClick","onCancel","injectIntl","_clip","str","length","substring","AccountSettingsView","me","tinode","getMeTopic","fullName","public","fn","undefined","MAX_TITLE_LENGTH","description","note","MAX_TOPIC_DESCRIPTION_LENGTH","avatar","makeImageUrl","photo","credentials","getCredentials","credEdit","componentDidMount","onCredsUpdated","_","componentWillUnmount","meth","onCredAdd","forEach","cred","idx","includes","push","key","href","onCredDelete","unshift","onNavigate","AvatarUpload","readOnly","uid","myUserId","title","BadgeList","trustedBadges","mobile_number_required","codeMap","dcodes","dc","dial","countryCode","dialCode","localNumber","placeholderNumber","handleChange","handleFinished","handleKeyDown","showCountrySelector","prefix","formatted","AsYouType","input","filterNumber","trim","isValid","inputField","setCustomValidity","format","sample","getExampleNumber","examples","flagEmoji","ref","onKeyDown","onBlur"],"sourceRoot":""}